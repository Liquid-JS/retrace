{"version":3,"sources":["../../node_modules/browserify/node_modules/browser-pack/_prelude.js","../../client/onerror.js","../../client/xhr.js","../../node_modules/xhr/index.js","../../node_modules/xhr/node_modules/global/window.js","../../node_modules/xhr/node_modules/is-function/index.js","../../node_modules/xhr/node_modules/once/once.js","../../node_modules/xhr/node_modules/parse-headers/node_modules/for-each/index.js","../../node_modules/xhr/node_modules/parse-headers/node_modules/trim/index.js","../../node_modules/xhr/node_modules/parse-headers/parse-headers.js","../../node_modules/xhr/node_modules/xtend/immutable.js","error.js","main"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","win","send","window","_onerror","onerror","msg","url","line","col","err","stack","xhr","opts","cb","target","encodeURIComponent","resp","body","once","isFunction","parseHeaders","xtend","createXHR","XMLHttpRequest","noop","XDomainRequest","forEachArray","method","uri","options","callback","initParams","toUpperCase","_createXHR","array","iterator","isEmpty","obj","hasOwnProperty","params","readystatechange","readyState","loadFunc","getBody","undefined","response","responseType","responseText","responseXML","isJson","JSON","parse","failureResponse","headers","statusCode","rawRequest","errorFunc","evt","clearTimeout","timeoutTimer","aborted","status","useXDR","getAllResponseHeaders","cors","key","data","sync","stringify","json","onreadystatechange","onload","onprogress","ontimeout","open","username","password","withCredentials","timeout","setTimeout","abort","setRequestHeader","beforeSend","global","self","toString","Object","prototype","fn","string","alert","confirm","prompt","proto","defineProperty","Function","value","this","configurable","called","apply","arguments","forEach","list","context","TypeError","forEachString","forEachObject","len","charAt","object","k","trim","str","replace","left","right","isArray","arg","result","split","row","index","indexOf","slice","toLowerCase","push","extend","source","invariant","cond","message","fail","document","innerHTML","error"],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC3NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"generated.js","sourceRoot":"","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","module.exports = function(win, send) {\n  if (!win) win = window;\n  var _onerror = win.onerror;\n  win.onerror = function(msg, url, line, col, err) {\n    var stack = err && err.stack;\n    if (!stack) {\n      // create a single stack frame from the provided data:\n      stack = msg + '\\n    at ' + url + ':' + line + ':' + col;\n    }\n    send(stack);\n    if (_onerror) _onerror(msg, url, line, col, err);\n  };\n}\n","var xhr = require('xhr');\nvar onerror = require('./onerror');\n\nmodule.exports = function(opts, cb) {\n  if (typeof opts == 'function') cb = opts;\n  if (typeof opts != 'object') opts = {};\n\n  onerror(opts.window, function(stack) {\n    var target = opts.target || '/retrace';\n    var url = target + '?stack=' + encodeURIComponent(stack);\n    xhr({ url: url }, function(err, resp, body) {\n      if (cb) {\n        if (err) cb('Error requesting ' + url + ': ' + err);\n        else cb(null, body);\n      }\n    });\n  });\n};\n","\"use strict\";\nvar window = require(\"global/window\")\nvar once = require(\"once\")\nvar isFunction = require(\"is-function\")\nvar parseHeaders = require(\"parse-headers\")\nvar xtend = require(\"xtend\")\n\nmodule.exports = createXHR\ncreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop\ncreateXHR.XDomainRequest = \"withCredentials\" in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\nforEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function(method) {\n    createXHR[method === \"delete\" ? \"del\" : method] = function(uri, options, callback) {\n        options = initParams(uri, options, callback)\n        options.method = method.toUpperCase()\n        return _createXHR(options)\n    }\n})\n\nfunction forEachArray(array, iterator) {\n    for (var i = 0; i < array.length; i++) {\n        iterator(array[i])\n    }\n}\n\nfunction isEmpty(obj){\n    for(var i in obj){\n        if(obj.hasOwnProperty(i)) return false\n    }\n    return true\n}\n\nfunction initParams(uri, options, callback) {\n    var params = uri\n\n    if (isFunction(options)) {\n        callback = options\n        if (typeof uri === \"string\") {\n            params = {uri:uri}\n        }\n    } else {\n        params = xtend(options, {uri: uri})\n    }\n\n    params.callback = callback\n    return params\n}\n\nfunction createXHR(uri, options, callback) {\n    options = initParams(uri, options, callback)\n    return _createXHR(options)\n}\n\nfunction _createXHR(options) {\n    var callback = options.callback\n    if(typeof callback === \"undefined\"){\n        throw new Error(\"callback argument missing\")\n    }\n    callback = once(callback)\n\n    function readystatechange() {\n        if (xhr.readyState === 4) {\n            loadFunc()\n        }\n    }\n\n    function getBody() {\n        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n        var body = undefined\n\n        if (xhr.response) {\n            body = xhr.response\n        } else if (xhr.responseType === \"text\" || !xhr.responseType) {\n            body = xhr.responseText || xhr.responseXML\n        }\n\n        if (isJson) {\n            try {\n                body = JSON.parse(body)\n            } catch (e) {}\n        }\n\n        return body\n    }\n\n    var failureResponse = {\n                body: undefined,\n                headers: {},\n                statusCode: 0,\n                method: method,\n                url: uri,\n                rawRequest: xhr\n            }\n\n    function errorFunc(evt) {\n        clearTimeout(timeoutTimer)\n        if(!(evt instanceof Error)){\n            evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\") )\n        }\n        evt.statusCode = 0\n        callback(evt, failureResponse)\n    }\n\n    // will load the data & process the response in a special response object\n    function loadFunc() {\n        if (aborted) return\n        var status\n        clearTimeout(timeoutTimer)\n        if(options.useXDR && xhr.status===undefined) {\n            //IE8 CORS GET successful response doesn't have a status field, but body is fine\n            status = 200\n        } else {\n            status = (xhr.status === 1223 ? 204 : xhr.status)\n        }\n        var response = failureResponse\n        var err = null\n\n        if (status !== 0){\n            response = {\n                body: getBody(),\n                statusCode: status,\n                method: method,\n                headers: {},\n                url: uri,\n                rawRequest: xhr\n            }\n            if(xhr.getAllResponseHeaders){ //remember xhr can in fact be XDR for CORS in IE\n                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n            }\n        } else {\n            err = new Error(\"Internal XMLHttpRequest Error\")\n        }\n        callback(err, response, response.body)\n\n    }\n\n    var xhr = options.xhr || null\n\n    if (!xhr) {\n        if (options.cors || options.useXDR) {\n            xhr = new createXHR.XDomainRequest()\n        }else{\n            xhr = new createXHR.XMLHttpRequest()\n        }\n    }\n\n    var key\n    var aborted\n    var uri = xhr.url = options.uri || options.url\n    var method = xhr.method = options.method || \"GET\"\n    var body = options.body || options.data || null\n    var headers = xhr.headers = options.headers || {}\n    var sync = !!options.sync\n    var isJson = false\n    var timeoutTimer\n\n    if (\"json\" in options) {\n        isJson = true\n        headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\") //Don't override existing accept header declared by user\n        if (method !== \"GET\" && method !== \"HEAD\") {\n            headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\") //Don't override existing accept header declared by user\n            body = JSON.stringify(options.json)\n        }\n    }\n\n    xhr.onreadystatechange = readystatechange\n    xhr.onload = loadFunc\n    xhr.onerror = errorFunc\n    // IE9 must have onprogress be set to a unique function.\n    xhr.onprogress = function () {\n        // IE must die\n    }\n    xhr.ontimeout = errorFunc\n    xhr.open(method, uri, !sync, options.username, options.password)\n    //has to be after open\n    if(!sync) {\n        xhr.withCredentials = !!options.withCredentials\n    }\n    // Cannot set timeout with sync request\n    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n    if (!sync && options.timeout > 0 ) {\n        timeoutTimer = setTimeout(function(){\n            aborted=true//IE9 may still call readystatechange\n            xhr.abort(\"timeout\")\n            var e = new Error(\"XMLHttpRequest timeout\")\n            e.code = \"ETIMEDOUT\"\n            errorFunc(e)\n        }, options.timeout )\n    }\n\n    if (xhr.setRequestHeader) {\n        for(key in headers){\n            if(headers.hasOwnProperty(key)){\n                xhr.setRequestHeader(key, headers[key])\n            }\n        }\n    } else if (options.headers && !isEmpty(options.headers)) {\n        throw new Error(\"Headers cannot be set on an XDomainRequest object\")\n    }\n\n    if (\"responseType\" in options) {\n        xhr.responseType = options.responseType\n    }\n\n    if (\"beforeSend\" in options &&\n        typeof options.beforeSend === \"function\"\n    ) {\n        options.beforeSend(xhr)\n    }\n\n    xhr.send(body)\n\n    return xhr\n\n\n}\n\nfunction noop() {}\n","if (typeof window !== \"undefined\") {\n    module.exports = window;\n} else if (typeof global !== \"undefined\") {\n    module.exports = global;\n} else if (typeof self !== \"undefined\"){\n    module.exports = self;\n} else {\n    module.exports = {};\n}\n","module.exports = isFunction\n\nvar toString = Object.prototype.toString\n\nfunction isFunction (fn) {\n  var string = toString.call(fn)\n  return string === '[object Function]' ||\n    (typeof fn === 'function' && string !== '[object RegExp]') ||\n    (typeof window !== 'undefined' &&\n     // IE8 and below\n     (fn === window.setTimeout ||\n      fn === window.alert ||\n      fn === window.confirm ||\n      fn === window.prompt))\n};\n","module.exports = once\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var called = false\n  return function () {\n    if (called) return\n    called = true\n    return fn.apply(this, arguments)\n  }\n}\n","var isFunction = require('is-function')\n\nmodule.exports = forEach\n\nvar toString = Object.prototype.toString\nvar hasOwnProperty = Object.prototype.hasOwnProperty\n\nfunction forEach(list, iterator, context) {\n    if (!isFunction(iterator)) {\n        throw new TypeError('iterator must be a function')\n    }\n\n    if (arguments.length < 3) {\n        context = this\n    }\n    \n    if (toString.call(list) === '[object Array]')\n        forEachArray(list, iterator, context)\n    else if (typeof list === 'string')\n        forEachString(list, iterator, context)\n    else\n        forEachObject(list, iterator, context)\n}\n\nfunction forEachArray(array, iterator, context) {\n    for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n            iterator.call(context, array[i], i, array)\n        }\n    }\n}\n\nfunction forEachString(string, iterator, context) {\n    for (var i = 0, len = string.length; i < len; i++) {\n        // no such thing as a sparse string.\n        iterator.call(context, string.charAt(i), i, string)\n    }\n}\n\nfunction forEachObject(object, iterator, context) {\n    for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n            iterator.call(context, object[k], k, object)\n        }\n    }\n}\n","\nexports = module.exports = trim;\n\nfunction trim(str){\n  return str.replace(/^\\s*|\\s*$/g, '');\n}\n\nexports.left = function(str){\n  return str.replace(/^\\s*/, '');\n};\n\nexports.right = function(str){\n  return str.replace(/\\s*$/, '');\n};\n","var trim = require('trim')\n  , forEach = require('for-each')\n  , isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    }\n\nmodule.exports = function (headers) {\n  if (!headers)\n    return {}\n\n  var result = {}\n\n  forEach(\n      trim(headers).split('\\n')\n    , function (row) {\n        var index = row.indexOf(':')\n          , key = trim(row.slice(0, index)).toLowerCase()\n          , value = trim(row.slice(index + 1))\n\n        if (typeof(result[key]) === 'undefined') {\n          result[key] = value\n        } else if (isArray(result[key])) {\n          result[key].push(value)\n        } else {\n          result[key] = [ result[key], value ]\n        }\n      }\n  )\n\n  return result\n}","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n","function invariant(cond, message) {\n  if (!cond) throw new Error(message);\n}\n\nfunction fail(message) {\n  invariant(false, message);\n}\n\nmodule.exports = function(message) {\n  fail(message);\n}\n","require('../../client/xhr')(function(err, stack) {\n  document.body.innerHTML = '<pre class=\"stack\">' + stack + '</pre>';\n});\n\nvar error = require('./error');\n\nsetTimeout(function() {\n  error('boo');\n}, 1);\n"]}